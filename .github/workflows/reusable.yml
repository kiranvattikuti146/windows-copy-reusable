name: Windows File Copy

on:
  workflow_call:
    inputs:
      SourcePath:
        description: 'Source path of the files to copy'
        required: true
        type: string
      MachineNames:
        description: 'Comma-separated list of remote Windows machine names'
        required: true
        type: string
      AdminUserName:
        description: 'Admin username for authentication'
        required: true
        type: string
      AdminPassword:
        description: 'Admin password for authentication'
        required: true
        type: string
      TargetPath:
        description: 'Destination folder path on the remote machines'
        required: true
        type: string
      CleanTarget:
        description: 'Clean the target folder before copying files'
        required: false
        type: boolean
        default: false
      CopyFilesInParallel:
        description: 'Enable parallel file copying'
        required: false
        type: boolean
        default: true
      AdditionalArguments:
        description: 'Additional arguments for the task'
        required: false
        type: string

jobs:
  file-copy:
    runs-on: windows-latest
    steps:
      - name: Checkout repository
        uses: actions/checkout@v3

      - name: Perform Windows Machine File Copy
        run: |
          echo "SourcePath: ${{ inputs.SourcePath }}"
          echo "MachineNames: ${{ inputs.MachineNames }}"
          echo "AdminUserName: ${{ inputs.AdminUserName }}"
          echo "TargetPath: ${{ inputs.TargetPath }}"
          echo "CleanTarget: ${{ inputs.CleanTarget }}"
          echo "CopyFilesInParallel: ${{ inputs.CopyFilesInParallel }}"
          echo "AdditionalArguments: ${{ inputs.AdditionalArguments }}"
